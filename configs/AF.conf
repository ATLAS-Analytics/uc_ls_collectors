input {
  http {
    host => "0.0.0.0"
    port => "80"
  }
}

filter {
  if [token] in [ "ucNTeA1rri", "slnYjX6NWl", "bnu874hafsdjfkasdfhiue" ] {
    mutate {
      remove_field => [ "headers", "token", "host" ]
    }
  } else {
    drop {}
  }
}

output {

  # stdout {
  #   codec => rubydebug
  # }

  if [kind] == "condorjob" {
    elasticsearch {
        hosts => "atlas-kibana.mwt2.org"
        ssl => true
        document_id => "%{cluster}-%{users}-%{Id}"
        index => "af_monitoring"
        user => "uc_logstash_indexer"
        password => "${LOGSTASH_PWD}"
    }
  } else {
        elasticsearch {
        hosts => "atlas-kibana.mwt2.org"
        ssl => true
        index => "af_monitoring"
        user => "uc_logstash_indexer"
        password => "${LOGSTASH_PWD}"
    }
  }

}
