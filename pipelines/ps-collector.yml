- pipeline.id: intake
  queue.type: persisted
  pipeline.workers: 2
  config.string: |
    input { 
      http {
        host => "0.0.0.0"
        port => "80"
      }
    }
    output { 
      if [type]=="meta" {
        pipeline { send_to => ["ps-meta"] } 
      }
      else if [type]=="status" {
        pipeline { send_to => ["ps-status"] } 
      }
      else {
        pipeline { send_to => ["ps-collector"] } 
      }
    }
- pipeline.id: ps-collector
  path.config: "/usr/share/logstash/configs/ps-collector.conf"
  pipeline.workers: 1
- pipeline.id: ps-status
  path.config: "/usr/share/logstash/configs/ps-status.conf"
  pipeline.workers: 1
#   queue.type: persisted
#   queue.max_bytes: 4gb
